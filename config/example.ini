; Example MFG settings file, containing all necessary settings and explanations.
;
; Basic INI format for a camera with (user-assigned) ID 00:
; Note that camera IDs/names should be unique
[cam-00]
; A width of zero means use the image's actual width
width = 0

; The MFG executable will:
;  1) automatically prepend the user's home directory and a slash
;     ** IF the following string does NOT begin with a slash '/',
;     so the 'image' setting only needs the data's relative path from $HOME
image = "testdata/image04100.png"
;  2) assume the following string is the ABSOLUTE path
;     ** IF the string begins with a slash '/' (unix),
;        OR the string begins with a windows disk location 'C:/'
;image = "/some/absolute/path/to/initial/image"
;image = "C:/some/windows/absolute/path"

; The Intrinsics Matrix for this camera:
; TODO: FIXME: may be backwards for u_0 and v_0
;     [ alpha_x   gamma    u_0 ]
;     [    0      alpha_y  v_0 ]
;     [    0         0     1   ]
; (explanation of values below)
; (copied from camera 3)
[cam-00/intrinsics]
alpha_x = 194.8847
alpha_y = 194.8847
gamma = 0
u_0 = 172.1608
v_0 = 125.0859
;  Where:
;     alpha_x  = f*m_x, focal length in pixels, x
;     alpha_y  = f*m_y, focal length in pixels, y
;     gamma    = skew coefficient (between x and y axes)
;     u_0      = principle point, x
;     v_0      = principle point, y
;
;  And
;     f        = focal length (in terms of distance)
;     m_x      = x-axis scaling factor (distance to pixels)
;     m_y      = y-axis scaling factor (distance to pixels)

; Camera Distortion Coefficients
[cam-00/distCoeffs]
c0 = 0
c1 = 0
c2 = 0
c3 = 0

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
; Now that cameras have been explained, here are the useful settings:
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;


[general]
; PRNG seed - 64-bit value used to seed the xorshift1024star algorithm
prng_seed = 1
; The default camera value should match one of the cameras specified below
; This default is useful if you do not want to add a command-line argument
; every time you run the executable for the same input.
camera = "cam-00"
; The directory to contain the program output.  If this value is left blank, 
; the default will be used.  If the directory does not exist, it will be 
; created automatically.
; Default output directory: [mfg root dir]/output
output_dir = ""


[features]
; Key Point/Feature Detection Algorithm to use:
;  1 = SIFT
;  2 = SURF
;  3 = GoodFeat
algorithm = 1
; Feature Descriptor radius
; For our test data: 11 for Bicocca, 21 for HRBB
descriptor_radius = 21
; Scale Invariant Feature Transform (SIFT) settings
[features/sift]
threshold = 0.6
; Good Features to Track (GFTT) settings
[features/gftt]
max_points = 300
quality = 0.01
; 3 for bicocca, 5 for HRBB
min_point_distance = 5


; Lucas-Kanade Optic Flow settings
[optic-flow]
min_eigenval = 0.001
; Window size
; For our test data: 15 for Bicocca, 19 for HRBB
window_size = 19


; Multi-Layer Feature Graph settings
[mfg]
point_to_plane_dist = 0.16
; Number of recent points to discover a plane
num_recent_points = 400
; Number of recent lines to discover a plane
num_recent_lines = 50
; Minimum number of points to define a plane
points_per_plane = 100
; Frame step size
; Our test data: 2 for Bicocca, 4 for HRBB
frame_step = 4
; Initial frame step size
; Our test data: 60 for Bicocca, 80 for HRBB
frame_step_init = 80
; Threshold angle for matching 2D Vanishing Points to 3D (in degrees)
vpoint_angle_thresh = 5
; Depth limit for triangulated points, HRBB 9
depth_limit = 12

; Bundle Adjustment settings
[ba]
; Weights for Vanishing Points, Lines and Planes
weight_vpoint = 15.0
weight_line = 1.0
weight_plane = 100.0
; Number of frames to use for Vanishing Points
num_frames = 10
; Use kernel? true/false
use_kernel = true
; Kernel deltas for Vanishing Points, Points, Lines and Planes
[ba/kernel]
delta_vpoint = 1.0
delta_point = 1.0
delta_line = 3.0
delta_plane = 1.0

